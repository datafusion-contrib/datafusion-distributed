syntax = "proto3";
package observability;

service ObservabilityService {
  rpc Ping (PingRequest) returns (PingResponse);
  rpc GetTaskProgress (GetTaskProgressRequest) returns (GetTaskProgressResponse);
}

message PingRequest {}

message PingResponse {
  uint32 value = 1;
}

message GetTaskProgressRequest {}

message StageKey {
  bytes query_id = 1;
  uint64 stage_id = 2;
  uint64 task_number = 3;
}

// Progress information for a single task
message TaskProgress {
  StageKey stage_key = 1;
  uint64 total_partitions = 2;
  uint64 completed_partitions = 3;
  TaskStatus status = 4;
}

enum TaskStatus {
  TASK_STATUS_UNSPECIFIED = 0;
  TASK_STATUS_RUNNING = 1;
}

message GetTaskProgressResponse {
  repeated TaskProgress tasks = 1;
}
